import{c as o,b as G,r as l,u as X,d as O,e as Y,j as e,f as J,O as Q}from"./entry-index-B_BwMGDA.js";import{E as ee,C as te,a as ne}from"./chunk-react-icons.esm-C0BSBnU8.js";import{L as ae,T as se,C as oe}from"./chunk-Login-B47lfyOn.js";import{T as ie,L as re}from"./chunk-Tabler-5qQjB6LN.js";import{u as ce,T as le}from"./chunk-tips-Bm4H-aJC.js";import{T as de}from"./chunk-trending-up-BH0T9zvj.js";import{E as he}from"./chunk-ellipsis-CAHuwugl.js";import{u as pe,A as me}from"./chunk-AccountContext-B4Xe2n3i.js";import{m as _}from"./chunk-proxy-C6LVNy_K.js";import{A as ue}from"./chunk-index-PbJe1vUH.js";import{o as fe}from"./chunk-grid-DgdHaNlS.js";import{p as g}from"./chunk-flex-BCOyAvOQ.js";import{o as A}from"./chunk-icon-button-CMpL5Fj6.js";import{o as K}from"./chunk-button-BYJQxefP.js";import{p as M}from"./chunk-text-2n0Dx3l-.js";import{n as xe,m as ge,u as ye}from"./chunk-callout-DIn4sHDa.js";import{u as be,a as ve}from"./chunk-api-h1eiz4mP.js";import{E as je}from"./chunk-field-D0EANj4z.js";import{s as we,p as U,g as ke}from"./chunk-dialog-DNX9FVqx.js";import"./chunk-dropdown-menu-DjJRBXTh.js";import"./chunk-base-button-CCk1VYTx.js";import"./chunk-icons-Du45HjA-.js";import"./chunk-require-react-element-nXeqDkbS.js";import"./chunk-index-B6kNq_40.js";import"./chunk-index-CC8wkri2.js";import"./chunk-box-B1i8JWQr.js";import"./chunk-text-field-DU038-QT.js";import"./chunk-internal-DlW9DyfA.js";import"./chunk-popover-CpHiNxfR.js";import"./chunk-heading-DUyPxxaV.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],_e=o("activity",Ne);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]],Ce=o("at-sign",Me);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ae=o("bell",Se);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],Te=o("bolt",Ke);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],$e=o("book",ze);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]],Ee=o("circle-arrow-right",Le);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M12 2a10 10 0 0 1 7.38 16.75",key:"175t95"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}],["path",{d:"M2.5 8.875a10 10 0 0 0-.5 3",key:"1vce0s"}],["path",{d:"M2.83 16a10 10 0 0 0 2.43 3.4",key:"o3fkw4"}],["path",{d:"M4.636 5.235a10 10 0 0 1 .891-.857",key:"1szpfk"}],["path",{d:"M8.644 21.42a10 10 0 0 0 7.631-.38",key:"9yhvd4"}]],Ve=o("circle-fading-arrow-up",He);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Pe=o("circle-user",Ue);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Oe=o("code",Be);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ie=o("file-text",Fe);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],qe=o("house",Re);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]],Ze=o("message-circle-more",We);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Ge=o("palette",De);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Ye=o("server",Xe);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"m19 5 3-3",key:"yk6iyv"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m12 6 6 6 2.3-2.3a2.4 2.4 0 0 0 0-3.4l-2.6-2.6a2.4 2.4 0 0 0-3.4 0Z",key:"1snsnr"}]],Qe=o("unplug",Je);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],tt=o("users",et),nt=[{labelKey:"common.server",path:"/admin",icon:"Server"},{labelKey:"settings.title",path:"/admin/settings",icon:"Bolt",children:[{labelKey:"settings.site.title",path:"/admin/settings/site",icon:"Home"},{labelKey:"theme.title",path:"/admin/settings/theme",icon:"Palette"},{labelKey:"settings.sign_on.title",path:"/admin/settings/sign-on",icon:"CircleArrowRight"},{labelKey:"settings.notification.title",path:"/admin/settings/notification",icon:"MessageCircleMore"},{labelKey:"settings.general.title",path:"/admin/settings/general",icon:"Ellipsis"}]},{labelKey:"notification.title",path:"/admin/notification",icon:"Bell",children:[{labelKey:"notification.offline.title",path:"/admin/notification/offline",icon:"Unplug"},{labelKey:"notification.load.title",path:"/admin/notification/load",icon:"TrendingUp"},{labelKey:"settings.general.title",path:"/admin/notification/general",icon:"Ellipsis"}]},{labelKey:"exec.title",path:"/admin/exec",icon:"Code"},{labelKey:"ping.title",path:"/admin/ping",icon:"Activity"},{labelKey:"sessions.title",path:"/admin/sessions",icon:"Users"},{labelKey:"account.title",path:"/admin/account",icon:"UserCircle"},{labelKey:"logs.title",path:"/admin/logs",icon:"FileText"},{labelKey:"common.about",path:"/admin/about",icon:"AtSign"},{labelKey:"common.documentation",path:"https://komari-document.pages.dev/",icon:"Book",newTab:!0},{labelKey:"common.home",path:"/",icon:"Home",newTab:!0}],at={menu:nt},st={Server:Ye,Bolt:Te,Home:qe,CircleArrowRight:Ee,MessageCircleMore:Ze,Ellipsis:he,Bell:Ae,Unplug:Qe,TrendingUp:de,Users:tt,UserCircle:Pe,FileText:Ie,AtSign:Ce,Book:$e,Activity:_e,Palette:Ge,Code:Oe},P=at.menu,ot=({content:i})=>{const{call:b}=G(),[h,u]=l.useState(!1),[y,v]=l.useState({}),{account:w}=pe(),s=ce(),T=window.location.protocol==="https:",[j]=X(),C=O(),{publicInfo:d}=Y(),[f,F]=l.useState(null),[x,z]=l.useState(null),[I,$]=l.useState(!1),[L,E]=l.useState([]),k=d==null?void 0:d.theme,[S,N]=l.useState([]);l.useEffect(()=>{let t=!1;async function r(){if(!k||k==="default"){N([]);return}try{const a=await fetch(`/themes/${k}/komari-theme.json`,{cache:"no-cache"});if(!a.ok)throw new Error(`HTTP ${a.status}`);const n=await a.json();if(t)return;const c=n==null?void 0:n.configuration;if(!c){N([]);return}const m=c.name||`${k}设置`,p=c.icon||"Palette";N([{labelKey:m,rawLabel:m,path:"/admin/theme_managed",icon:p}])}catch(a){console.warn("加载主题配置失败，将不扩展主题菜单:",a),t||N([])}}return r(),()=>{t=!0}},[k]),l.useEffect(()=>{(async()=>{var r;try{const a=await b("common:getVersion");F({hash:(r=a.hash)==null?void 0:r.slice(0,7),version:a.version})}catch(a){console.error("Failed to fetch version info:",a)}})()},[]);function H(t){if(!t)return null;const a=String(t).trim().replace(/^v/i,"").match(/^(\d+)\.(\d+)\.(\d+)/);return a?[Number(a[1]),Number(a[2]),Number(a[3])]:null}function R(t,r){const a=H(t),n=H(r);if(!a||!n)return!1;for(let c=0;c<3;c++){if(a[c]>n[c])return!0;if(a[c]<n[c])return!1}return!1}l.useEffect(()=>{let t=!1;const r=(d==null?void 0:d.version)||(f==null?void 0:f.version);if(!r)return;async function a(){try{const n=await fetch("https://api.github.com/repos/komari-monitor/komari/releases?per_page=100",{headers:{Accept:"application/vnd.github+json"},cache:"no-cache"});if(!n.ok)throw new Error(`GitHub HTTP ${n.status}`);const c=await n.json();if(t)return;const m=(c||[]).filter(p=>!p.draft&&!p.prerelease).filter(p=>R((p==null?void 0:p.tag_name)||(p==null?void 0:p.name),r));E(m),z(m.length?m[0]:null),$(m.length>0)}catch(n){console.warn("加载 GitHub 最新发布失败:",n),t||(z(null),E([]),$(!1))}}return a(),()=>{t=!0}},[d,f]),l.useEffect(()=>{const t=()=>u(!s);return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[s]),l.useEffect(()=>{const t={};[...P,...S].forEach(a=>{a.children&&(t[a.path]=a.children.some(n=>C.pathname===n.path||C.pathname.startsWith(n.path)))}),v(t)},[C.pathname,S]);const q={open:{width:s?"100vw":"240px",opacity:1,transition:{type:"spring",stiffness:300,damping:30}},closed:{width:0,opacity:s?0:1,transition:{type:"spring",stiffness:300,damping:30}}},W={open:{opacity:s?0:1,x:s?"100%":0,transition:{duration:.3}},closed:{opacity:1,x:0,transition:{duration:.3}}};function Z(){window.open("/api/logout","_self")}return e.jsx(e.Fragment,{children:e.jsxs(fe,{columns:{initial:"1fr",md:h?"240px 1fr":"0px 1fr"},rows:{initial:"auto 1fr",md:"auto 1fr"},style:{height:"100vh",width:"100vw",overflow:"auto",backgroundColor:"var(--accent-1)"},children:[e.jsx(_.nav,{className:"col-span-2",initial:{y:0},animate:{y:0},transition:{duration:.5,ease:"easeOut"},children:e.jsxs(g,{gap:"3",p:"2",justify:"between",align:"center",className:"border-b-1",children:[e.jsxs(g,{gap:"3",align:"center",children:[e.jsx(A,{variant:"ghost",onClick:()=>u(!h),style:{display:s&&h?"none":"flex",color:"var(--gray-11)"},children:e.jsx(ie,{})}),e.jsx("a",{href:"/",target:"_blank",rel:"noopener noreferrer",children:e.jsx("label",{className:"text-xl font-bold",children:"Komari"})}),I&&L.length>0&&e.jsx(le,{mode:"dialog",className:"check-update",trigger:e.jsx(Ve,{color:"#FB4141",size:"16"}),children:e.jsxs("div",{className:"flex flex-col gap-2 max-w-[80vw] md:max-w-[720px]",children:[e.jsx("label",{className:"font-bold",children:j("common.update_available")}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{style:{marginRight:8},children:(d==null?void 0:d.version)||(f==null?void 0:f.version)}),e.jsx("span",{children:"> "}),e.jsx("span",{children:((x==null?void 0:x.tag_name)||(x==null?void 0:x.name))??""})]}),e.jsx("div",{className:"rounded-md p-2 overflow-auto max-h-80",children:e.jsx("div",{className:"flex flex-col gap-4 text-sm",children:L.map(t=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium",children:t.name||t.tag_name}),t.published_at&&e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(t.published_at).toLocaleString()})]}),e.jsx("div",{className:"whitespace-pre-wrap break-words",children:t.body||""}),e.jsx("div",{style:{height:1,background:"var(--accent-5)",opacity:.5}})]},t.html_url))})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("a",{href:x==null?void 0:x.html_url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(K,{variant:"soft",children:"Github"})})})]})}),e.jsx("label",{className:"text-sm text-muted-foreground self-end overflow-hidden",hidden:s,children:(d==null?void 0:d.version)||f&&`${f.version} (${f.hash})`})]}),e.jsxs(g,{gap:"3",align:"center",overflowX:"auto",children:[w&&!w.logged_in&&e.jsx(ae,{autoOpen:!0,showSettings:!1,onLoginSuccess:()=>{window.location.reload()}}),e.jsx(se,{}),e.jsx(oe,{}),e.jsx(re,{}),e.jsx(A,{variant:"soft",color:"orange",onClick:Z,children:e.jsx(ee,{})})]})]})}),e.jsx(ue,{children:e.jsx(_.div,{variants:q,initial:"closed",animate:h?"open":"closed",exit:"closed",style:{backgroundColor:"var(--accent-1)",height:"100%",position:s?"absolute":"relative",zIndex:s?10:1,overflowY:"auto",overflowX:"hidden"},children:e.jsxs(g,{gap:"3",className:"p-2 border-r-1",direction:"column",justify:"start",align:"start",style:{height:"100%",minWidth:"240px"},children:[e.jsx(A,{variant:"soft",style:{display:s?"flex":"none",margin:"8px 0px 0px 8px"},onClick:()=>u(!1),children:e.jsx(te,{})}),e.jsx(g,{direction:"column",gap:"1",className:"h-full md:mt-0 mt-6",style:{width:"100%"},children:[...P,...S].map(t=>{const r=y[t.path],a=(n,c,m,p)=>{if(/^(https?:\/\/|\/|\.\/|\.\.\/)/.test(n))return e.jsx("img",{src:n,alt:j(c),style:{width:16,height:16,objectFit:"contain",opacity:.7,filter:"grayscale(20%)"},className:m,loading:"lazy"});const V=st[n];return V?e.jsx(V,{className:m,style:{color:"var(--gray11)"}}):e.jsx("span",{className:m,style:{width:16,height:16,display:"inline-block",borderRadius:4,background:"var(--accent-8)"}})};return t.children&&t.children.length?e.jsxs("div",{children:[e.jsxs(g,{className:"p-2 gap-2 border-l-[4px] border-transparent cursor-pointer hover:bg-accent-3 rounded-md",align:"center",onClick:()=>{v(n=>({...n,[t.path]:!n[t.path]}))},children:[a(t.icon,t.labelKey,"flex w-4 h-5 items-center justify-center"),e.jsx(M,{className:"text-base",weight:"medium",style:{flex:1},children:t.rawLabel||j(t.labelKey)}),e.jsx(ne,{style:{transform:r?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),e.jsx(_.div,{initial:{height:0,opacity:0},animate:r?{height:"auto",opacity:1}:{height:0,opacity:0},transition:{duration:.2},style:{overflow:"hidden"},children:e.jsx(g,{direction:"column",className:"ml-4 gap-1",children:t.children.map(n=>e.jsx(B,{to:n.path,icon:a(n.icon,n.labelKey,"flex w-4 h-5 items-center justify-center"),children:n.rawLabel||j(n.labelKey),onClick:()=>s&&u(!1),newTab:n.newTab},n.path))})})]},t.path):e.jsx(B,{to:t.path,icon:a(t.icon,t.labelKey,"flex w-4 h-5 items-center justify-center"),children:t.rawLabel||j(t.labelKey),onClick:()=>s&&u(!1),newTab:t.newTab},t.path)})})]})})}),e.jsx(_.div,{variants:W,animate:h?"open":"closed",style:{backgroundColor:"var(--accent-3)",display:s&&h?"none":"block",height:"100%",overflow:"hidden"},children:e.jsxs("div",{style:{backgroundColor:"var(--accent-1)",height:"100%",borderRadius:"0",padding:s?"8px":"16px",overflowY:"auto",boxSizing:"border-box"},children:[e.jsxs(xe,{mb:"2",hidden:T,color:"red",children:[e.jsx(ge,{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M10.03 3.659c.856-1.548 3.081-1.548 3.937 0l7.746 14.001c.83 1.5-.255 3.34-1.969 3.34H4.254c-1.715 0-2.8-1.84-1.97-3.34zM12.997 17A.999.999 0 1 0 11 17a.999.999 0 0 0 1.997 0m-.259-7.853a.75.75 0 0 0-1.493.103l.004 4.501l.007.102a.75.75 0 0 0 1.493-.103l-.004-4.502z"})})}),e.jsx(ye,{children:e.jsx(M,{size:"2",weight:"medium",children:j("warn_https")})})]}),i]})})]})})},B=({to:i,onClick:b,icon:h,children:u,newTab:y})=>{const v=O(),w=i.startsWith("http://")||i.startsWith("https://"),s=!w&&i!=="/"&&(v.pathname===i||i!=="/admin"&&v.pathname.startsWith(i));return y===!0||w&&y!==!1?e.jsx("a",{href:i,onClick:b,target:"_blank",rel:"noopener noreferrer",className:"group transition-colors duration-200 hover:bg-accent-3 rounded-md",children:e.jsxs(g,{className:"p-2 gap-2 h-full",align:"center",style:{borderLeft:"4px solid transparent",borderRadius:"6px",backgroundColor:"transparent",color:"inherit",transition:"background-color 0.2s, border-color 0.2s"},children:[e.jsx("span",{style:{color:"inherit",opacity:.7},className:"flex w-4 h-5 items-center justify-center",children:h}),e.jsx(M,{className:"text-base",weight:"medium",style:{flex:1},children:u})]})}):e.jsx(J,{to:i,onClick:b,className:"group transition-colors duration-200 hover:bg-accent-3 rounded-md",children:e.jsxs(g,{className:"p-2 gap-2",align:"center",style:{borderLeft:s?"4px solid var(--accent-8)":"4px solid transparent",borderRadius:"6px",backgroundColor:s?"var(--accent-4)":"transparent",color:s?"var(--accent-10)":"inherit",transition:"background-color 0.2s, border-color 0.2s"},children:[e.jsx("span",{style:{color:s?"var(--accent-10)":"inherit",opacity:s?1:.7},className:"flex w-4 h-5 items-center justify-center",children:h}),e.jsx(M,{className:"text-base",weight:s?"bold":"medium",style:{flex:1},children:u})]})})},Ht=()=>{const{settings:i,loading:b}=be(),h=localStorage.getItem("i18nextLng")||"en",[u,y]=l.useState(!1);return l.useEffect(()=>{b?y(!1):i&&!i.eula_accepted&&h.startsWith("zh")&&y(!0)},[b,i,h]),e.jsxs(e.Fragment,{children:[e.jsx(we,{open:u,children:e.jsx(U,{children:e.jsxs(U,{children:[e.jsx(ke,{children:"法律声明与合规指引"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"max-h-[70vh] overflow-y-auto space-y-4",children:e.jsx("pre",{className:"text-wrap",children:je})}),e.jsxs("div",{className:"flex flex-row gap-2 justify-end items-center",children:[e.jsx(K,{variant:"soft",color:"red",onClick:()=>window.close(),children:"不接受"}),e.jsx(K,{variant:"solid",onClick:()=>{y(!1),ve({eula_accepted:!0},v=>v)},children:"我已详细阅读并接受"})]})]})]})})}),e.jsx(me,{children:e.jsx(ot,{content:e.jsx(Q,{})})})]})};export{Ht as default};
