const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunk-NodeDisplay-hLoOCNjY.js","assets/entry-index-B_BwMGDA.js","assets/index-CBRwr2Vz.css","assets/chunk-Node-DFLplAAA.js","assets/chunk-box-B1i8JWQr.js","assets/chunk-flex-BCOyAvOQ.js","assets/chunk-text-2n0Dx3l-.js","assets/chunk-base-button-CCk1VYTx.js","assets/chunk-PriceTags-BunVVuX_.js","assets/chunk-badge-CENIML0j.js","assets/chunk-tips-Bm4H-aJC.js","assets/chunk-dialog-DNX9FVqx.js","assets/chunk-heading-DUyPxxaV.js","assets/chunk-require-react-element-nXeqDkbS.js","assets/chunk-popover-CpHiNxfR.js","assets/chunk-unitHelper-BjgrQHpY.js","assets/chunk-utils-bRKmu4jq.js","assets/chunk-throttle-BvK4cc7c.js","assets/chunk-card-CkJ954zg.js","assets/chunk-switch-CZ0Z7J0K.js","assets/chunk-index-BNFPzONB.js","assets/chunk-trending-up-BH0T9zvj.js","assets/chunk-separator-H8QRyRNq.js","assets/chunk-icon-button-CMpL5Fj6.js","assets/chunk-search-BdPb8rle.js","assets/chunk-text-field-DU038-QT.js","assets/chunk-internal-DlW9DyfA.js","assets/chunk-segmented-control-IbHSJkfD.js","assets/chunk-index-CC8wkri2.js","assets/chunk-index-B6kNq_40.js","assets/NodeDisplay-B499_hnQ.css"])))=>i.map(i=>d[i]);
import{j as e,u as O,a as V,r as b,L as N,R as T,_ as M}from"./entry-index-B_BwMGDA.js";import{f as k}from"./chunk-unitHelper-BjgrQHpY.js";import{u as C,a as D}from"./chunk-NodeListContext-HYH4wDWx.js";import{o as E}from"./chunk-card-CkJ954zg.js";import{n as y,m as S,u as z}from"./chunk-callout-DIn4sHDa.js";import{p as x}from"./chunk-flex-BCOyAvOQ.js";import{o as I}from"./chunk-icon-button-CMpL5Fj6.js";import{P as R,s as A,i as P}from"./chunk-popover-CpHiNxfR.js";import{i as _}from"./chunk-switch-CZ0Z7J0K.js";import{p}from"./chunk-text-2n0Dx3l-.js";import{S as F}from"./chunk-settings-CGD2bVo_.js";import"./chunk-base-button-CCk1VYTx.js";import"./chunk-require-react-element-nXeqDkbS.js";import"./chunk-index-BNFPzONB.js";const G=T.lazy(()=>M(()=>import("./chunk-NodeDisplay-hLoOCNjY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]))),B=n=>{if(n===0)return"0 B/s";const i=["B/s","KB/s","MB/s","GB/s","TB/s"],t=Math.floor(Math.log(n)/Math.log(1024)),l=n/Math.pow(1024,t);let c=2;return t>=3&&(c=1),t<=1&&(c=0),l>=100&&(c=0),`${l.toFixed(c)} ${i[t]}`},le=()=>{const n=()=>{const[i]=O(),{live_data:t}=C(),{nodeList:l,isLoading:c,error:j,refresh:$}=D(),[d,L]=V("statusCardsVisibility",{currentTime:!0,currentOnline:!0,regionOverview:!0,trafficOverview:!0,networkSpeed:!0}),v=[{key:"currentTime",title:i("current_time"),getValue:()=>new Date().toLocaleTimeString(),visible:d.currentTime},{key:"currentOnline",title:i("current_online"),getValue:()=>{var r;return`${((r=t==null?void 0:t.data)==null?void 0:r.online.length)??0} / ${(l==null?void 0:l.length)??0}`},visible:d.currentOnline},{key:"regionOverview",title:i("region_overview"),getValue:()=>l?Object.entries(l.reduce((r,o)=>(t!=null&&t.data.online.includes(o.uuid)&&(r[o.region]=(r[o.region]||0)+1),r),{})).length:0,visible:d.regionOverview},{key:"trafficOverview",title:i("traffic_overview"),getValue:()=>{var m,h;const r=(m=t==null?void 0:t.data)==null?void 0:m.data,o=(h=t==null?void 0:t.data)==null?void 0:h.online;if(!r||!o)return"↑ 0B / ↓ 0B";const w=new Set(o),u=Object.entries(r).filter(([s])=>w.has(s)).map(([,s])=>s),g=u.reduce((s,a)=>s+(a.network.totalUp||0),0),f=u.reduce((s,a)=>s+(a.network.totalDown||0),0);return`↑ ${k(g)} / ↓ ${k(f)}`},visible:d.trafficOverview},{key:"networkSpeed",title:i("network_speed"),getValue:()=>{var m,h;const r=(m=t==null?void 0:t.data)==null?void 0:m.data,o=(h=t==null?void 0:t.data)==null?void 0:h.online;if(!r||!o)return"↑ 0 B/s / ↓ 0 B/s";const w=new Set(o),u=Object.entries(r).filter(([s])=>w.has(s)).map(([,s])=>s),g=u.reduce((s,a)=>s+(a.network.up||0),0),f=u.reduce((s,a)=>s+(a.network.down||0),0);return`↑ ${B(g)} / ↓ ${B(f)}`},visible:d.networkSpeed}];return b.useEffect(()=>{const r=setInterval(()=>{$()},5e3);return()=>clearInterval(r)},[l]),c?e.jsx(N,{}):j?e.jsxs("div",{children:["Error: ",j]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{}),e.jsxs(E,{className:"summary-card mx-4 md:text-base text-sm relative",children:[e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(R,{children:[e.jsx(A,{children:e.jsx(I,{variant:"ghost",size:"1",children:e.jsx(F,{size:16})})}),e.jsx(P,{width:"300px",children:e.jsxs(x,{direction:"column",gap:"3",children:[e.jsx(p,{size:"2",weight:"bold",children:i("status_settings")}),e.jsx(x,{direction:"column",gap:"2",children:v.map(r=>e.jsx(U,{label:r.title,checked:r.visible,onCheckedChange:o=>L({...d,[r.key]:o})},r.key))})]})})]})}),e.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fit, minmax(230px, 1fr))",gridAutoRows:"min-content"},children:v.filter(r=>r.visible).map(r=>e.jsx(K,{title:r.title,value:r.getValue()},r.key))})]}),e.jsx(b.Suspense,{fallback:e.jsx("div",{style:{padding:16},children:"Loading…"}),children:e.jsx(G,{nodes:l??[],liveData:(t==null?void 0:t.data)??{online:[],data:{}}})})]})};return e.jsx(n,{})},H=()=>{const[n]=O(),{showCallout:i}=C(),t=window.location.protocol==="https:";return e.jsxs(x,{direction:"column",gap:"2",className:"m-2",children:[e.jsxs(y,{m:"2",hidden:t,color:"red",children:[e.jsx(S,{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M10.03 3.659c.856-1.548 3.081-1.548 3.937 0l7.746 14.001c.83 1.5-.255 3.34-1.969 3.34H4.254c-1.715 0-2.8-1.84-1.97-3.34zM12.997 17A.999.999 0 1 0 11 17a.999.999 0 0 0 1.997 0m-.259-7.853a.75.75 0 0 0-1.493.103l.004 4.501l.007.102a.75.75 0 0 0 1.493-.103l-.004-4.502z"})})}),e.jsx(z,{children:e.jsx(p,{size:"2",weight:"medium",children:n("warn_https")})})]}),e.jsxs(y,{m:"2",hidden:i,id:"callout",color:"tomato",children:[e.jsx(S,{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M21.707 3.707a1 1 0 0 0-1.414-1.414L18.496 4.09a4.25 4.25 0 0 0-5.251.604l-1.068 1.069a1.75 1.75 0 0 0 0 2.474l3.585 3.586a1.75 1.75 0 0 0 2.475 0l1.068-1.068a4.25 4.25 0 0 0 .605-5.25zm-11 8a1 1 0 0 0-1.414-1.414l-1.47 1.47l-.293-.293a.75.75 0 0 0-1.06 0l-1.775 1.775a4.25 4.25 0 0 0-.605 5.25l-1.797 1.798a1 1 0 1 0 1.414 1.414l1.798-1.797a4.25 4.25 0 0 0 5.25-.605l1.775-1.775a.75.75 0 0 0 0-1.06l-.293-.293l1.47-1.47a1 1 0 0 0-1.414-1.414l-1.47 1.47l-1.586-1.586z"})})}),e.jsx(z,{children:e.jsx(p,{size:"2",weight:"medium",children:n("warn_websocket")})})]})]})},K=({title:n,value:i,description:t})=>e.jsx("div",{className:"min-w-52 md:max-w-72 w-full",children:e.jsxs(x,{direction:"column",gap:"1",children:[e.jsx("label",{className:"text-muted-foreground text-sm",children:n}),e.jsx("label",{className:"font-medium -mt-2 text-md",children:i}),t&&e.jsx(p,{size:"2",color:"gray",children:t})]})}),U=({label:n,checked:i,onCheckedChange:t})=>e.jsxs(x,{justify:"between",align:"center",children:[e.jsx(p,{size:"2",children:n}),e.jsx(_,{checked:i,onCheckedChange:t})]});export{le as default};
