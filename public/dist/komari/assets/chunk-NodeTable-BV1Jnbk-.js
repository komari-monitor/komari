import{c as N,u as R,r as C,j as e,R as z,f as O}from"./entry-index-B_BwMGDA.js";import{T as B,a as F,b as f,c as l,d as I,e as c}from"./chunk-table-C7OLDXxB.js";import{B as L,E as $,U as b,M as H}from"./chunk-Node-DFLplAAA.js";import{f as g}from"./chunk-unitHelper-BjgrQHpY.js";import{F as M,P as q}from"./chunk-PriceTags-BunVVuX_.js";import{T as G}from"./chunk-tips-Bm4H-aJC.js";import{D as A}from"./chunk-DetailsGrid-COPrC5FW.js";import{C as J}from"./chunk-chevron-down-Dkw6_t5U.js";import{p as o}from"./chunk-flex-BCOyAvOQ.js";import{o as K}from"./chunk-icon-button-CMpL5Fj6.js";import{e as Q}from"./chunk-badge-CENIML0j.js";import"./chunk-utils-bRKmu4jq.js";import"./chunk-box-B1i8JWQr.js";import"./chunk-text-2n0Dx3l-.js";import"./chunk-base-button-CCk1VYTx.js";import"./chunk-throttle-BvK4cc7c.js";import"./chunk-card-CkJ954zg.js";import"./chunk-switch-CZ0Z7J0K.js";import"./chunk-require-react-element-nXeqDkbS.js";import"./chunk-index-BNFPzONB.js";import"./chunk-popover-CpHiNxfR.js";import"./chunk-trending-up-BH0T9zvj.js";import"./chunk-separator-H8QRyRNq.js";import"./chunk-dialog-DNX9FVqx.js";import"./chunk-heading-DUyPxxaV.js";import"./chunk-NodeListContext-HYH4wDWx.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],W=N("chevron-right",V);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Y=N("chevron-up",X),_e=({nodes:j,liveData:u})=>{const[s]=R(),[v,T]=C.useState(new Set),[h,_]=C.useState({field:null,order:"default"}),D=t=>{T(n=>{const r=new Set(n);return r.has(t)?r.delete(t):r.add(t),r})},i=t=>n=>{n.preventDefault(),_(r=>{if(r.field===t){const x=r.order==="default"?"asc":r.order==="asc"?"desc":"default";return{field:x==="default"?null:t,order:x}}else return{field:t,order:"asc"}})},d=t=>h.field!==t?null:h.order==="asc"?e.jsx(Y,{size:14}):e.jsx(J,{size:14}),w=u&&u.online?u.online:[],k=t=>{const n={cpu:{usage:0},ram:{used:0},disk:{used:0},network:{up:0,down:0,totalUp:0,totalDown:0},uptime:0};return u&&u.data&&u.data[t]||n},U=[...j].sort((t,n)=>{const r=w.includes(t.uuid),x=w.includes(n.uuid),p=k(t.uuid),m=k(n.uuid);if(!h.field||h.order==="default")return r!==x?r?-1:1:t.weight-n.weight;let a=0;switch(h.field){case"name":a=t.name.localeCompare(n.name);break;case"os":a=t.os.localeCompare(n.os);break;case"status":a=Number(x)-Number(r);break;case"cpu":a=p.cpu.usage-m.cpu.usage;break;case"ram":const y=t.mem_total?p.ram.used/t.mem_total*100:0,S=n.mem_total?m.ram.used/n.mem_total*100:0;a=y-S;break;case"disk":const E=t.disk_total?p.disk.used/t.disk_total*100:0,P=n.disk_total?m.disk.used/n.disk_total*100:0;a=E-P;break;case"price":a=t.price-n.price;break;case"networkUp":a=p.network.up-m.network.up;break;case"networkDown":a=p.network.down-m.network.down;break;case"totalUp":a=p.network.totalUp-m.network.totalUp;break;case"totalDown":a=p.network.totalDown-m.network.totalDown;break;default:a=0}return h.order==="desc"?-a:a});return e.jsx("div",{className:"mx-4 overflow-x-auto rounded-xl node-table-container",children:e.jsxs(B,{children:[e.jsx(F,{children:e.jsxs(f,{children:[e.jsx(l,{className:"w-[24px]"}),e.jsx(l,{className:"w-[200px] min-w-[150px] cursor-pointer hover:bg-accent-2 select-none",onClick:i("name"),title:s("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",children:[s("nodeCard.name"),d("name")]})}),e.jsx(l,{className:"cursor-pointer hover:bg-accent-2 select-none",onClick:i("os"),title:s("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",children:[s("nodeCard.os"),d("os")]})}),e.jsx(l,{className:"max-w-[128px] cursor-pointer hover:bg-accent-2 select-none",onClick:i("status"),title:s("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",children:[s("nodeCard.status"),d("status")]})}),e.jsx(l,{className:"cursor-pointer hover:bg-accent-2 select-none",onClick:i("cpu"),title:s("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",children:[s("nodeCard.cpu"),d("cpu")]})}),e.jsx(l,{className:"cursor-pointer hover:bg-accent-2 select-none",onClick:i("ram"),title:s("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",children:[s("nodeCard.ram"),d("ram")]})}),e.jsx(l,{className:"cursor-pointer hover:bg-accent-2 select-none",onClick:i("disk"),title:s("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",children:[s("nodeCard.disk"),d("disk")]})}),e.jsx(l,{className:"cursor-pointer hover:bg-accent-2 select-none",onClick:i("price"),title:s("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",children:[s("nodeCard.price"),d("price")]})}),e.jsx(l,{className:"cursor-pointer hover:bg-accent-2 select-none text-center min-w-[80px]",onClick:i("networkUp"),title:s("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",justify:"center",children:[s("nodeCard.networkUploadSpeed"),d("networkUp")]})}),e.jsx(l,{className:"cursor-pointer hover:bg-accent-2 select-none text-center min-w-[80px]",onClick:i("networkDown"),title:s("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",justify:"center",children:[s("nodeCard.networkDownloadSpeed"),d("networkDown")]})}),e.jsx(l,{className:"cursor-pointer hover:bg-accent-2 select-none text-center min-w-[80px]",onClick:i("totalUp"),title:s("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",justify:"center",children:[s("nodeCard.totalUpload"),d("totalUp")]})}),e.jsx(l,{className:"cursor-pointer hover:bg-accent-2 select-none text-center min-w-[80px]",onClick:i("totalDown"),title:s("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",justify:"center",children:[s("nodeCard.totalDownload"),d("totalDown")]})})]})}),e.jsx(I,{children:U.map(t=>{const n=w.includes(t.uuid),r=k(t.uuid),x=v.has(t.uuid),p=t.mem_total?r.ram.used/t.mem_total*100:0,m=t.disk_total?r.disk.used/t.disk_total*100:0;return e.jsxs(z.Fragment,{children:[e.jsxs(f,{className:"hover:bg-accent-2 transition-colors duration-200 table-row-hover",onClick:()=>D(t.uuid),children:[e.jsx(c,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(K,{variant:"ghost",size:"1",className:`expand-button ${x?"expanded":""}`,"aria-label":"Expand row",children:e.jsx(W,{size:16})})})}),e.jsx(c,{className:"node-name-cell",children:e.jsxs(o,{align:"center",gap:"1",children:[e.jsx(M,{flag:t.region}),e.jsx(O,{to:`/instance/${t.uuid}`,className:"hover:underline",onClick:a=>a.stopPropagation(),children:e.jsxs(o,{direction:"column",gap:"0",children:[e.jsx("label",{className:"max-w-[150px] font-bold text-lg truncate",children:t.name}),n?e.jsx("label",{className:"-mt-1 text-muted-foreground text-xs",children:L(r.uptime,s)}):e.jsx("label",{className:"-mt-1 text-muted-foreground",children:"-"})]})})]})}),e.jsx(c,{className:"w-4",children:e.jsx("img",{src:$(t.os),alt:t.os,className:"w-5 h-5 mr-2"})}),e.jsx(c,{children:e.jsxs(o,{direction:"row",justify:"start",align:"center",gap:"1",children:[e.jsx("div",{children:e.jsx(Q,{color:n?"green":"red",variant:"soft",size:"1",children:s(n?"nodeCard.online":"nodeCard.offline")})}),r.message&&e.jsx(G,{color:"#CE282E",children:r.message})]})}),e.jsx(c,{children:e.jsx("div",{className:"w-[100px]",children:e.jsx(b,{label:"",value:r.cpu.usage,compact:!0})})}),e.jsx(c,{children:e.jsx("div",{className:"w-[100px]",children:e.jsx(b,{label:"",value:p,compact:!0})})}),e.jsx(c,{children:e.jsx("div",{className:"w-[100px]",children:e.jsx(b,{label:"",value:m,compact:!0})})}),e.jsx(c,{children:e.jsx(q,{price:t.price,billing_cycle:t.billing_cycle,expired_at:t.expired_at,currency:t.currency,gap:"1",tags:t.tags||""})}),e.jsx(c,{className:"text-center min-w-[80px]",children:e.jsxs("label",{children:["↑",g(r.network.up),"/s"]})}),e.jsx(c,{className:"text-center min-w-[80px]",children:e.jsxs("label",{children:["↓",g(r.network.down),"/s"]})}),e.jsx(c,{className:"text-center min-w-[80px]",children:e.jsxs("label",{children:["↑",g(r.network.totalUp)]})}),e.jsx(c,{className:"text-center min-w-[80px]",children:e.jsxs("label",{children:["↓",g(r.network.totalDown)]})})]}),x&&e.jsx(f,{className:"expanded-row",children:e.jsx(c,{colSpan:12,className:"bg-accent-1",children:e.jsx("div",{className:"expand-content",children:e.jsx(Z,{node:t,nodeData:r})})})})]},t.uuid)})})]})})},Z=({node:j})=>e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(A,{gap:"0",uuid:j.uuid}),e.jsx("div",{children:e.jsx(H,{hours:24,uuid:j.uuid})})]});export{_e as default};
